<!doctype html>
<html class="no-js">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Amaze UI Admin index Examples</title>
    <meta name="description" content="这是一个 index 页面">
    <meta name="keywords" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="icon" type="image/png" href="assets/i/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="assets/i/app-icon72x72@2x.png">
    <meta name="apple-mobile-web-app-title" content="Amaze UI" />
    <link rel="stylesheet" href="assets/css/amazeui.min.css" />
    <link rel="stylesheet" href="assets/css/admin.css">
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/app.js"></script>
    <style type="text/css">
        body,
        #main {
            width: 98%;
            margin: 0 auto;
            margin-bottom: 50px;
            background-color: #fff;
        }

        #form {
            width: 100%;
            height: 100%;
            position: relative;
            margin: 0 auto;
        }

        .name,
        .price,
        .flavor,
        .batching,
        .integral,
        .exchange,
        .change,
        .photo {
            width: 100%;
            line-height: 50px;
            padding: 15px;
            box-sizing: initial;
            border: 1px solid #ddd;
            border-top: none;
        }

        .photo {
            height: 240px;
            line-height: 240px;

        }

        .name>span,
        .price>span,
        .photo>span,
        .flavor>span,
        .batching>span,
        .integral>span,
        .exchange>span,
        .change>span {
            display: inline-block;
            width: 15%;
            height: 50px;
            line-height: 50px;
            font-size: 16px;
            text-align: center;
        }

        .name>input,
        .price>input,
        .photo>input,
        .flavor>input,
        .batching>input,
        .integral>input,
        .exchange>input,
        .change>input {
            width: 10%;
            height: 30px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        #photo {
            display: inline-block;
        }

        #sub {
            background-color: #fff;
            border: 1px solid #333;
            color: #333;
            margin: 20px;
            margin-left: 20px;
        }

        .add_flavor {
            background-color: #4aaa4a;
            display: inline-block;
            border-radius: 10px;
            width: 120px;
        }

        .add_flavor img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
        }

        .add_flavor span:last-child {
            display: inline-block;
            line-height: 30px;
            text-align: center;
            font-size: 12px;
        }

        .am-form-group {
            padding-left: 20px
        }

        .add {
            height: 50px;
            line-height: 50px;
        }
    </style>
    <!--[if lte IE 9]><p class="browsehappy">升级你的浏览器吧！ <a href="http://se.360.cn/" target="_blank">升级浏览器</a>以获得更好的体验！</p><![endif]-->
</head>

<body>
    <div class="admin-biaogelist">
        <div class="listbiaoti am-cf">
            <ul class="am-icon-flag on">宠物预设条件管理</ul>
            <dl class="am-icon-home" style="float: right;">
                当前位置： 首页 >
                <a href="set_tj.html" target="iframe">宠物管理</a>
            </dl>
        </div>
        <div id="main">
            <div class="am-tabs" data-am-tabs>
                <ul class="am-tabs-nav am-nav am-nav-tabs">
                    <li class="am-active">
                        <a href="#tab1">体重类型</a>
                    </li>
                    <li>
                        <a href="#tab2">历史粮食</a>
                    </li>
                    <li>
                        <a href="#tab3">活跃度</a>
                    </li>
                    <li>
                        <a href="#tab4">过敏源</a>
                    </li>
                    <li>
                        <a href="#tab5">宠物需求点</a>
                    </li>
                </ul>

                <div class="am-tabs-bd">
                    <div class="am-tab-panel am-active" id="tab1">
                        <p class="add">
                            <button type="button" class="am-btn am-btn-danger am-round am-btn-xs am-icon-plus" id="add_weightType"> 添加体重类型</button>
                        </p>
                        <table width="100%" class="am-table am-table-bordered am-table-centered">
                            <thead>
                                <tr>
                                    <th class="table-id">编号</th>
                                    <th class="table-title">详情</th>
                                    <th class="table-type">状态</th>
                                    <th width="130px" class="table-set">操作</th>
                                </tr>
                            </thead>
                            <tbody id="table1">

                            </tbody>
                        </table>

                    </div>
                    <div class="am-tab-panel" id="tab2">
                        <p class="add">
                            <button type="button" class="am-btn am-btn-danger am-round am-btn-xs am-icon-plus" id="add_historyFood"> 添加历史粮食</button>
                        </p>
                        <table width="100%" class="am-table am-table-bordered am-table-centered">
                            <thead>
                                <tr>
                                    <th class="table-id">编号</th>
                                    <th class="table-title">详情</th>
                                    <th class="table-type">状态</th>
                                    <th width="130px" class="table-set">操作</th>
                                </tr>
                            </thead>
                            <tbody id="table2">

                            </tbody>
                        </table>
                    </div>
                    <div class="am-tab-panel" id="tab3">
                        <p class="add">
                            <button type="button" class="am-btn am-btn-danger am-round am-btn-xs am-icon-plus" id="add_activity"> 添加活跃度</button>
                        </p>
                        <table width="100%" class="am-table am-table-bordered am-table-centered">
                            <thead>
                                <tr>
                                    <th class="table-id">编号</th>
                                    <th class="table-title">详情</th>
                                    <th class="table-type">状态</th>
                                    <th width="130px" class="table-set">操作</th>
                                </tr>
                            </thead>
                            <tbody id="table3">

                            </tbody>
                        </table>
                    </div>
                    <div class="am-tab-panel" id="tab4">
                        <p class="add">
                            <button type="button" class="am-btn am-btn-danger am-round am-btn-xs am-icon-plus" id="add_activity"> 添加过敏源</button>
                        </p>
                        <table width="100%" class="am-table am-table-bordered am-table-centered">
                            <thead>
                                <tr>
                                    <th class="table-id">编号</th>
                                    <th class="table-title">详情</th>
                                    <th class="table-type">状态</th>
                                    <th width="130px" class="table-set">操作</th>
                                </tr>
                            </thead>
                            <tbody id="table4">

                            </tbody>
                        </table>
                    </div>
                    <div class="am-tab-panel" id="tab5">
                        <p class="add">
                            <button type="button" class="am-btn am-btn-danger am-round am-btn-xs am-icon-plus" id="add_demand"> 添加宠物需求点</button>
                        </p>
                        <table width="100%" class="am-table am-table-bordered am-table-centered">
                            <thead>
                                <tr>
                                    <th class="table-id">编号</th>
                                    <th class="table-title">详情</th>
                                    <th class="table-type">状态</th>
                                    <th width="130px" class="table-set">操作</th>
                                </tr>
                            </thead>
                            <tbody id="table5">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- // 添加体重类型 -->
    <div class="am-modal am-modal-prompt" tabindex="-1" id="my-prompt">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">添加体重类型</div>
            <div class="am-modal-bd">
                请输入要添加的体重类型
                <input type="text" class="am-modal-prompt-input">
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>取消</span>
                <span class="am-modal-btn" data-am-modal-confirm>提交</span>
            </div>
        </div>
    </div>
    <!-- // 添加历史粮食 -->
    <div class="am-modal am-modal-prompt" tabindex="-1" id="my-prompt1">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">添加历史粮食</div>
            <div class="am-modal-bd">
                请输入要添加的历史粮食
                <input type="text" class="am-modal-prompt-input">
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>取消</span>
                <span class="am-modal-btn" data-am-modal-confirm>提交</span>
            </div>
        </div>
    </div>
    <!-- // 添加活跃度 -->
    <div class="am-modal am-modal-prompt" tabindex="-1" id="my-prompt2">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">添加活跃度</div>
            <div class="am-modal-bd">
                请输入要添加的活跃度
                <input type="text" class="am-modal-prompt-input">
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>取消</span>
                <span class="am-modal-btn" data-am-modal-confirm>提交</span>
            </div>
        </div>
    </div>
    <!-- // 添加过敏源 -->
    <div class="am-modal am-modal-prompt" tabindex="-1" id="my-prompt3">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">添加过敏源</div>
            <div class="am-modal-bd">
                请输入要添加的过敏源
                <input type="text" class="am-modal-prompt-input">
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>取消</span>
                <span class="am-modal-btn" data-am-modal-confirm>提交</span>
            </div>
        </div>
    </div>
    <!-- // 添加需求点 -->
    <div class="am-modal am-modal-prompt" tabindex="-1" id="my-prompt4">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">添加需求点</div>
            <div class="am-modal-bd">
                请输入要添加的需求点
                <input type="text" class="am-modal-prompt-input">
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>取消</span>
                <span class="am-modal-btn" data-am-modal-confirm>提交</span>
            </div>
        </div>
    </div>
    <!-- // 删除体重类型 -->
    <div class="am-modal am-modal-confirm" tabindex="-1" id="my-confirm">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">提示</div>
            <div class="am-modal-bd">
                你，确定要删除这条记录吗？
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>取消</span>
                <span class="am-modal-btn" data-am-modal-confirm>确定</span>
            </div>
        </div>
    </div>
    <!-- // 删除历史粮食 -->
    <div class="am-modal am-modal-confirm" tabindex="-1" id="my-confirm1">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">提示</div>
            <div class="am-modal-bd">
                你，确定要删除这条记录吗？
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>取消</span>
                <span class="am-modal-btn" data-am-modal-confirm>确定</span>
            </div>
        </div>
    </div>
    <!-- // 删除活跃度 -->
    <div class="am-modal am-modal-confirm" tabindex="-1" id="my-confirm2">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">提示</div>
            <div class="am-modal-bd">
                你，确定要删除这条记录吗？
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>取消</span>
                <span class="am-modal-btn" data-am-modal-confirm>确定</span>
            </div>
        </div>
    </div>
    <!-- // 删除过敏源 -->
    <div class="am-modal am-modal-confirm" tabindex="-1" id="my-confirm3">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">提示</div>
            <div class="am-modal-bd">
                你，确定要删除这条记录吗？
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>取消</span>
                <span class="am-modal-btn" data-am-modal-confirm>确定</span>
            </div>
        </div>
    </div>
    <!-- // 删除需求点 -->
    <div class="am-modal am-modal-confirm" tabindex="-1" id="my-confirm4">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">提示</div>
            <div class="am-modal-bd">
                你，确定要删除这条记录吗？
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>取消</span>
                <span class="am-modal-btn" data-am-modal-confirm>确定</span>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        // 获取缓存中的用户的userid和token
        var userid = sessionStorage.getItem("admin_userid");
        var token = sessionStorage.getItem("token");
        // 获取体重类型
        $.ajax({
            url: "https://myyouta.com/mzXL/manage/getWeightType",
            data: {
                token: token,
                userid: userid
            },
            async: false,
            success: function (res) {
                console.log(res);
                if (res.code == 100000) {
                    var delflag = "";
                    for (var i = 0; i < res.data.length; i++) {
                        if (res.data[i].delflag == 1) {
                            delflag = "使用中"
                        } else {
                            delflag = "已作废"
                        }
                        $("#table1").append('<tr><td>' + res.data[i].id + '</td><td>' + res.data[i].weightType +
                            '</td><td>' + delflag +
                            '</td><td><button type="button" class="am-btn am-btn-default am-btn-xs am-text-danger am-round" data-id="' +
                            res.data[i].id +
                            '" target="" data-weightType="' + res.data[i].weightType +
                            '" class="del" onclick="del(this)">删除</button></td> </tr>')
                    }
                }
            }
        })
        // 获取历史粮食
        $.ajax({
            url: "https://myyouta.com/mzXL/manage/getHistoryFood",
            data: {
                token: token,
                userid: userid
            },
            async: false,
            success: function (res) {
                console.log(res);
                if (res.code == 100000) {
                    var delflag = "";
                    for (var i = 0; i < res.data.length; i++) {
                        if (res.data[i].delflag == 1) {
                            delflag = "使用中"
                        } else {
                            delflag = "已作废"
                        }
                        $("#table2").append('<tr><td>' + res.data[i].id + '</td><td>' + res.data[i].historyFood +
                            '</td><td>' + delflag +
                            '</td><td><button type="button" class="am-btn am-btn-default am-btn-xs am-text-danger am-round" data-id="' +
                            res.data[i].id +
                            '" target="" data-historyFood="' + res.data[i].historyFood +
                            '" class="del" onclick="del1(this)">删除</button></td> </tr>')
                    }
                }
            }
        })
        // 获取活跃度
        $.ajax({
            url: "https://myyouta.com/mzXL/manage/getActivityPet",
            data: {
                token: token,
                userid: userid
            },
            async: false,
            success: function (res) {
                console.log(res);
                if (res.code == 100000) {
                    var delflag = "";
                    for (var i = 0; i < res.data.length; i++) {
                        if (res.data[i].delflag == 1) {
                            delflag = "使用中"
                        } else {
                            delflag = "已作废"
                        }
                        $("#table3").append('<tr><td>' + res.data[i].id + '</td><td>' + res.data[i].activity +
                            '</td><td>' + delflag +
                            '</td><td><button type="button" class="am-btn am-btn-default am-btn-xs am-text-danger am-round" data-id="' +
                            res.data[i].id +
                            '" target="" data-activity="' + res.data[i].activity +
                            '" class="del" onclick="del2(this)">删除</button></td> </tr>')
                    }
                }
            }
        })
        // 获取过敏源
        $.ajax({
            url: "https://myyouta.com/mzXL/manage/getAllergy",
            data: {
                token: token,
                userid: userid
            },
            async: false,
            success: function (res) {
                console.log(res);
                if (res.code == 100000) {
                    var delflag = "";
                    for (var i = 0; i < res.data.length; i++) {
                        if (res.data[i].delflag == 1) {
                            delflag = "使用中"
                        } else {
                            delflag = "已作废"
                        }
                        $("#table4").append('<tr><td>' + res.data[i].id + '</td><td>' + res.data[i].allergy +
                            '</td><td>' + delflag +
                            '</td><td><button type="button" class="am-btn am-btn-default am-btn-xs am-text-danger am-round" data-id="' +
                            res.data[i].id +
                            '" target="" data-allergy="' + res.data[0].allergy +
                            '" class="del" onclick="del3(this)">删除</button></td> </tr>')
                    }
                }
            }
        })
        // 获需求点
        $.ajax({
            url: "https://myyouta.com/mzXL/manage/getPetDemand",
            data: {
                token: token,
                userid: userid
            },
            async: false,
            success: function (res) {
                console.log(res);
                if (res.code == 100000) {
                    var delflag = "";
                    for (var i = 0; i < res.data.length; i++) {
                        if (res.data[i].delflag == 1) {
                            delflag = "使用中"
                        } else {
                            delflag = "已作废"
                        }
                        $("#table5").append('<tr><td>' + res.data[i].id + '</td><td>' + res.data[i].demand +
                            '</td><td>' + delflag +
                            '</td><td><button type="button" class="am-btn am-btn-default am-btn-xs am-text-danger am-round" data-id="' +
                            res.data[i].id +
                            '" target="" data-demand="' + res.data[i].demand +
                            '" class="del" onclick="del4(this)">删除</button></td> </tr>')
                    }
                }
            }
        })
        // 添加
        function addHistoryFoodHT(historyFood, allergy, activity, weightType, demand) {
            $.ajax({
                url: "https://myyouta.com/mzXL/addHistoryFoodHT",
                data: {
                    token: token,
                    userid: userid,
                    historyFood: historyFood,
                    allergy: allergy,
                    activity: activity,
                    weightType: weightType,
                    demand: demand
                },
                async: false,
                success: function (res) {
                    if (res.code == 100000) {
                        alert("添加成功");
                        location.reload();
                    } else {
                        alert(res.message);
                    }
                }

            })
        }
        // 删除
        function deleteHistoryFoodHT(id, historyFood, allergy, activity, weightType, demand) {
            $.ajax({
                url: "https://myyouta.com/mzXL/deleteHistoryFoodHT",
                data: {
                    token: token,
                    userid: userid,
                    id: id,
                    historyFood: historyFood,
                    allergy: allergy,
                    activity: activity,
                    weightType: weightType,
                    demand: demand
                },
                async: false,
                success: function (res) {
                    if (res.code == 100000) {
                        alert("删除成功");
                        location.reload();
                    } else {
                        alert(res.message);
                    }
                }

            })
        }
        // 添加体重类型
        $("#add_weightType").click(function () {
            $('#my-prompt').modal({
                relatedTarget: this,
                onConfirm: function (e) {
                    // alert('你输入的是：' + e.data || '')
                    var weightType = e.data;
                    addHistoryFoodHT("", "", "", weightType, "");
                },
                onCancel: function (e) {}
            });
        })
        // 添加历史粮食
        $("#add_historyFood").click(function () {
            $('#my-prompt1').modal({
                relatedTarget: this,
                onConfirm: function (e) {
                    // alert('你输入的是：' + e.data || '')
                    var historyFood = e.data;
                    addHistoryFoodHT(historyFood, "", "", "", "");
                },
                onCancel: function (e) {}
            });
        })
        // 添加活跃度
        $("#add_activity").click(function () {
            $('#my-prompt2').modal({
                relatedTarget: this,
                onConfirm: function (e) {
                    // alert('你输入的是：' + e.data || '')
                    var activity = e.data;
                    addHistoryFoodHT("", "", activity, "", "");
                },
                onCancel: function (e) {}
            });
        })
        // 添加过敏源
        $("#add_demand").click(function () {
            $('#my-prompt3').modal({
                relatedTarget: this,
                onConfirm: function (e) {
                    // alert('你输入的是：' + e.data || '')
                    var allergy = e.data;
                    addHistoryFoodHT("", allergy, "", "", "");
                },
                onCancel: function (e) {}
            });
        })
        // 添加需求点
        $("#add_historyFood").click(function () {
            $('#my-prompt4').modal({
                relatedTarget: this,
                onConfirm: function (e) {
                    // alert('你输入的是：' + e.data || '')
                    var demand = e.data;
                    addHistoryFoodHT("", "", "", "", demand);
                },
                onCancel: function (e) {}
            });
        })
        // 删除体重类型
        function del(e) {
            var id = $(e)[0].dataset.id;
            var weightType = $(e)[0].dataset.weightType
            $('#my-confirm').modal({
                relatedTarget: this,
                onConfirm: function (options) {
                    deleteHistoryFoodHT(id, "", "", "", weightType, "")
                },
                // closeOnConfirm: false,
                onCancel: function () {}
            });
        }
        // 删除历史粮食
        function del1(e) {
            var id = $(e)[0].dataset.id;
            var historyFood = $(e)[0].dataset.historyFood
            $('#my-confirm').modal({
                relatedTarget: this,
                onConfirm: function (options) {
                    deleteHistoryFoodHT(id, historyFood, "", "", "", "")
                },
                // closeOnConfirm: false,
                onCancel: function () {}
            });
        }
        // 删除活跃度
        function del2(e) {
            var id = $(e)[0].dataset.id;
            var activity = $(e)[0].dataset.activity
            $('#my-confirm').modal({
                relatedTarget: this,
                onConfirm: function (options) {
                    deleteHistoryFoodHT(id, "", "", activity, "", "")
                },
                // closeOnConfirm: false,
                onCancel: function () {}
            });
        }
        // 删除过敏源
        function del3(e) {
            var id = $(e)[0].dataset.id;
            var allergy = $(e)[0].dataset.allergy
            $('#my-confirm').modal({
                relatedTarget: this,
                onConfirm: function (options) {
                    deleteHistoryFoodHT(id, "", allergy, "", "", "")
                },
                // closeOnConfirm: false,
                onCancel: function () {}
            });
        }
        // 删除需求点
        function del4(e) {
            var id = $(e)[0].dataset.id;
            var historyFood = $(e)[0].dataset.historyFood
            $('#my-confirm').modal({
                relatedTarget: this,
                onConfirm: function (options) {
                    deleteHistoryFoodHT(id, "", "", "", "", demand)
                },
                // closeOnConfirm: false,
                onCancel: function () {}
            });
        }
    </script>
    <!--[if lt IE 9]>
<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="assets/js/polyfill/rem.min.js"></script>
<script src="assets/js/polyfill/respond.min.js"></script> 
<script src="assets/js/amazeui.legacy.js"></script>
<![endif]-->

    <!--[if (gte IE 9)|!(IE)]><!-->
    <script src="assets/js/amazeui.min.js"></script>
    <!--<![endif]-->



</body>

</html>